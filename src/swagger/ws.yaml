paths:
  /ws:
    get:
      tags:
        - WebSockets
      summary: WebSocket connection for online status tracking
      description: |
        This WebSocket gateway handles user online/offline status updates.

        **Connection URL**: `ws://localhost:3000`  
        **Authentication**: Pass JWT token via `auth.token` during handshake.

        ### Connection Example:
        ```js
        const socket = io('ws://localhost:3000', {
          auth: { token: 'your_jwt_token_here' }
        });
        ```

        ### Behavior:
        - On successful connection, sets `user.isActive = true`.
        - On disconnect, sets `user.isActive = false`.

        ### Errors:
        - If token is missing or invalid, connection is refused.
        - If user not found by token payload, connection is refused.

      responses:
        '101':
          description: WebSocket protocol handshake successful
        '401':
          description: Unauthorized - invalid or missing token
        '500':
          description: Internal error during connection
