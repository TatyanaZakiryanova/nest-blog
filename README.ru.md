# Nest Blog

**Backend API –±–ª–æ–≥–∞ –Ω–∞ NestJS, PostgreSQL –∏ TypeORM**. –í–∫–ª—é—á–∞–µ—Ç **JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**, **RBAC**, **–∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤** –≤ –æ–±–ª–∞–∫–æ, **WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** –¥–ª—è realtime-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

‚ö†Ô∏è _–ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Render –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 1 –º–∏–Ω—É—Ç—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ_

## üîó Quick Links

[**Swagger docs**](https://nest-blog-7ygh.onrender.com/docs) _(use `/auth/register` to get tokens)_

## üõ†Ô∏è Technologies

- **Node.js + Nest.js**
- **PostgreSQL** (TypeORM)
- **JWT** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **bcrypt** - —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **Multer + Cloudinary** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Zod** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **nestjs/config**, **dotenv** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **Neon, Render** - –¥–µ–ø–ª–æ–π
- **Swagger** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üíª Features

### Authentication & Authorization

- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **JWT token**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ **RolesGuard**. **–ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**:
  - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —é–∑–µ—Ä–æ–≤ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–æ–ª–µ–π
  - –£–¥–∞–ª–µ–Ω–∏–µ –ª—é–±–æ–≥–æ —é–∑–µ—Ä–∞, –ø–æ—Å—Ç–∞ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- **AuthGuard** –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **Admin seeding** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –ë–î

### CRUD & Database

- **CRUD** –¥–ª—è –ø–æ—Å—Ç–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **—Å—Ö–µ–º Zod** (—Å–æ–∑–¥–∞–Ω **ZodValidationPipe**) –∏ **DTO**
- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **TypeORM transactions** (**increment/decrement commentsCount** –ø–æ—Å—Ç–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è)

### Pagination

- **offset/limit –ø–∞–≥–∏–Ω–∞—Ü–∏—è** –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ query-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: `?page=1&limit=10`
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: **total**, **page**, **lastPage**

### WebSocket Gateway (online status)

- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ **WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** —Å **JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π** (—á–µ—Ä–µ–∑ `handshake.auth.token`)
- –°—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (online/offline) **—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î**
- –°—Ç–∞—Ç—É—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏:
  - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (`handleConnection`)
  - –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ (`handleDisconnect`)

### Security & Performance

- –í–∫–ª—é—á–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Å –ø–æ–º–æ—â—å—é **Helmet**
- –û—Ç–∫—Ä—ã—Ç –¥–æ—Å—Ç—É–ø –ø–æ **CORS**
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ **ThrottlerModule**: `limit: 10`

### –úedia

- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ **Multer + Cloudinary**

#### File Upload explanation

- Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST-–∑–∞–ø—Ä–æ—Å **multipart/form-data** —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
- Nest.js –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä, —Ç–∏–ø —Ñ–∞–π–ª–∞) —á–µ—Ä–µ–∑ **ParseFilePipe**
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–µ—Ä–µ–¥–∞—ë—Ç `Express.Multer.File` –≤ **UploadService**
- **UploadService**:
  - –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç file's **buffer** –≤ **readable stream**: `Readable.from(file.buffer)`
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–æ—Ç –ø–æ—Ç–æ–∫ –≤ **Cloudinary's upload_stream**
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{ url: 'https://res.cloudinary.com/...' }`

### Deployment & Docs

- **Swagger** –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **YAML** —Ñ–∞–π–ª–æ–≤
- –î–µ–ø–ª–æ–π –±—ç–∫–µ–Ω–¥–∞ - **Render**, –¥–µ–ø–ª–æ–π PostgreSQL –±–∞–∑—ã - **Neon**

## üìÅ Architecture

```bash
migrations/
src/
‚îú‚îÄ‚îÄ admin/
‚îú‚îÄ‚îÄ auth/
‚îú‚îÄ‚îÄ comments/
‚îú‚îÄ‚îÄ common/
‚îú‚îÄ‚îÄ posts/
‚îú‚îÄ‚îÄ seed/
‚îú‚îÄ‚îÄ swagger/
‚îú‚îÄ‚îÄ upload/
‚îú‚îÄ‚îÄ users/
‚îú‚îÄ‚îÄ ws/
```

## ü™Ñ How to start project

clone the repository:

```bash
git clone
```

in the project directory, run:

```bash
npm install
```

create **.env** file with _.env.example_ in the root directory, then build the project:

```bash
npm run build
```

start the server:

```bash
npm start
```
